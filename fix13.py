with open('bot.py', 'r', encoding='utf-8') as f:
    text = f.read()

# 1. Убираем из промпта необходимость спрашивать категорию и добавляем автоопределение
old_add_med_cmd = '[ADD_MEDICINE:название|количество|дозировка|срок|категория] - добавить лекарство.'
new_add_med_cmd = '[ADD_MEDICINE:название|количество|дозировка|срок|категория] - добавить лекарство. КАТЕГОРИИ определяй сам на основе своих знаний о лекарстве: ТЕМПЕРАТУРА (жаропонижающие, противопростудные), БОЛЬ (обезболивающие, спазмолитики), ЖИВОТ (ЖКТ, пищеварение), РАНЫ (антисептики, бинты, пластыри, мази для кожи), РАЗНОЕ (аллергия, сердце, давление, витамины и всё остальное). НИКОГДА не спрашивай категорию у пользователя - определяй сам. Также определяй правильное название лекарства, типовую дозировку если пользователь не указал.'
text = text.replace(old_add_med_cmd, new_add_med_cmd)

# 2. Дополняем промпт чтобы бот обогащал данные
old_never_template = 'НИКОГДА не подставляй шаблонные значения'
new_never_template = 'При добавлении лекарства: 1) Определи правильное полное название. 2) Если пользователь не указал дозировку - подставь стандартную (например Нурофен = 200мг, Парацетамол = 500мг). 3) Категорию определи сам. 4) Если количество не указано - поставь 1. 5) Если срок не указан - поставь пустую строку. НИКОГДА не подставляй шаблонные значения'
text = text.replace(old_never_template, new_never_template)

with open('bot.py', 'w', encoding='utf-8') as f:
    f.write(text)
print('Done fix13!')